---
title: "Python 中的除法运算符"
date: 2021-10-19
tags:
- python
---

在 Python 3 中关于除法的运算符有三种：

- `/`：表示精确的真除法。魔法方法为 `__truediv__`。
- `//`：表示地板除。魔法方法为 `__floordiv__`。
- `%`：表示求模。魔法方法为 `__mod__`。

<!--more-->

`/` 无需介绍。其中 `//` 被称为地板除是因为其结果等价于对 `/` 的结果向下取整。设操作数 `m` 和 `n` 是整数，于是有关系

```
m // n = floor(m / n)
```

即便 `m` 或 `n` 是负数时，这一关系依然成立。例如

```
In : 5 // 2
Out: 2

In: -5 // 2
Out: -3

In: 5 // -2
Out: -3

In: -5 // -2
Out: 2
```

`%` 的结果与 `//` 的结果密切相关，它们一定满足

```
q = m // n
r = m % n
q * n + r = m
```

所以 `%` 的结果可以通过 `r = m - q * n` 计算得到。例如 `-5 % 2` 就等于 1。

再扩展一下，即便 `m` 或 `n` 是浮点数，结果依然遵循上面的计算流程，不过此时 `//` 和 `%` 的结果都会变成浮点型。例如

```
In : 5.5 // 2, 5.5 % 2
Out: (2.0, 1.5)

In: -5.5 // 2, -5.5 % 2
Out: (-3.0, 0.5)
```

此外可以观察到，在地板除的定义下，除数 `n` 和模 `r` 总是同号的。

其它语言中 `/`、`//`（如果有的话）和 `%` 行为可能跟 Python 不同，使用时需要多加小心。
